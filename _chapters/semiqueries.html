---
layout: chapter
title: Semiqueries
subtitle: Where question marks come to die
description: Obscure answers to obscure questions
icon: fa-solid fa-question-circle
type: specific
stack: 2
---

<div class="semiquery-container">
	{%- assign semiqueries = site.semiqueries | sort: "date" | reverse %}
	{%- for semiquery in semiqueries %}
		{%- assign slug = semiquery.url | replace: "/semiqueries/", "" %}
		<div class="semiquery" id="{{ slug }}">
			<div class="semiquery-top">
				<div class="semiquery-icon">
					{%- for icon in site.data.icons.semiqueries %}
						{%- if icon.topic == semiquery.topic %}
							{% assign topic_icon = icon.icon %}
						{%- endif %}
					{%- endfor %}
					<i class="{{ topic_icon }}"></i>
	
					<span class="hashtag" tooltip="Click to copy link" flow="top">#</span>
				</div>
	
				<span class="semiquery-title">
					<!--<span class="hashtag">#</span>-->
					{{ semiquery.title }}
				</span>
				<span class="semiquery-origin">{{ semiquery.date | date: "%B %-d, %Y" }}</span>
			</div>
	
			<div class="semiquery-bottom">
				<div class="semiquery-content">
					{{ semiquery.content }}
				</div>
			</div>
		</div>
	{%- endfor %}
</div>

<script>
	// Function to calculate relative heights of each semiquery
	function calculateHeights() {
		$(".semiquery-bottom").each(function() {
			var semiqueryHeight = $(this)[0].scrollHeight + "px";
			$(this).attr("data-scroll-height", semiqueryHeight);
		});
	}

	// Function to apply stored heights of each semiquery
	function applyHeights() {
		$(".semiquery-bottom").css("max-height", "0");
		var openSemiqueryHeight = $(".open-semiquery .semiquery-bottom").attr("data-scroll-height");
		$(".open-semiquery .semiquery-bottom").css("max-height", openSemiqueryHeight);
	}



	// On document load, calculate each semiquery's height and assign target/anchor as open-semiquery
	$(document).ready(function() {
		calculateHeights();

		// Fix scrolling issues for url target/anchor
		if (window.location.hash) {
			$(":target").addClass("open-semiquery");
			applyHeights();
			var transition = parseFloat($(".semiquery").css("--transition")) * 1000;
			$("html, body").animate({
				scrollTop: $(":target").offset().top - 50
			}, transition);
		}
	});



	// On browser resize, recalculate each semiquery's height and reapply it instantaneously
	// Meant to mimic "max-height: none" or "height: auto"
	window.onresize = function() {
		calculateHeights();
		applyHeights();
	}



	// Toggle semiquery opening on click
	$(".semiquery-top").click(function() {
		var thisSemiquery = $(this).parent();
		$(".semiquery").not(thisSemiquery).removeClass("open-semiquery");
		thisSemiquery.toggleClass("open-semiquery");
		applyHeights();
	});



	// Copy semiquery title on click
	$(".hashtag").click(function(e) {
		e.stopPropagation();

		var semiquery = $(this).closest(".semiquery");
		var semiqueryLink = location.protocol + "//" + location.host + location.pathname + "#" + semiquery.attr("id");
		copy(semiqueryLink);

		var $this = $(this);
		$this.attr("tooltip", "Copied!");
		setTimeout(() => $this.attr("tooltip", "Click to copy link"), 700);
	});
</script>